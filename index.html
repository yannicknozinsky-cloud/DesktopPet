<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Meine Supabase Daten</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Supabase JS SDK -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 20px;
      background: #f7f7f7;
    }
    h2 {
      margin-top: 30px;
    }
    ul {
      padding: 0;
      list-style: none;
    }
    li {
      background: white;
      padding: 12px;
      margin-bottom: 8px;
      border-radius: 8px;
    }
    a {
      text-decoration: none;
      color: #2a9d8f;
      font-weight: bold;
    }
  </style>
</head>

<body>

<h1>ğŸ“± Meine Supabase Daten</h1>

<h2>ğŸŒ Websites</h2>
<ul id="websites"></ul>

<h2>ğŸ“… Termine</h2>
<ul id="termine"></ul>

<script>
  // ğŸ” Supabase URL und ANON PUBLIC KEY
  const supabaseUrl = "https://qkmtybzdthrpjfkbgskw.supabase.co";
  const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFrbXR5YnpkdGhycGpma2Jnc2t3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4ODI3ODIsImV4cCI6MjA4MzQ1ODc4Mn0.VO1Bz0vKO4xTrcu-XCsZlrF4HgvgdbGLz3KKFRfG0Do";

  const supabaseClient = supabase.createClient(supabaseUrl, supabaseAnonKey);

  async function loadWebsites() {
    const { data, error } = await supabaseClient
      .from("websites")
      .select("name, url")
      .order("name");

    if (error) {
      alert("Fehler beim Laden der Websites: " + error.message);
      return;
    }

    const ul = document.getElementById("websites");
    ul.innerHTML = ""; // vorherige Daten lÃ¶schen
    data.forEach(w => {
      const li = document.createElement("li");
      li.innerHTML = `<a href="${w.url}" target="_blank">${w.name}</a>`;
      ul.appendChild(li);
    });
  }

  async function loadTermine() {
    const { data, error } = await supabaseClient
      .from("termine")
      .select("name, datum, uhrzeitstart, uhrzeitende, ort")
      .order("datum");

    if (error) {
      alert("Fehler beim Laden der Termine: " + error.message);
      return;
    }

    const ul = document.getElementById("termine");
    ul.innerHTML = "";
    data.forEach(t => {
      const li = document.createElement("li");
     const start = t.uhrzeitstart ? t.uhrzeitstart.slice(0, 5) : "";
const ende  = t.uhrzeitende   ? t.uhrzeitende.slice(0, 5) : "";

li.innerHTML = `
  <strong>${t.name}</strong><br>
  ğŸ“… ${t.datum} <br>
  â° ${start} - ${ende}<br>
  ğŸ“ ${t.ort || ""}
`;
      ul.appendChild(li);
    });
  }

  // Daten laden
  loadWebsites();
  loadTermine();
</script>

</body>
</html>
